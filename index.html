<!DOCTYPE html>
<html>
<head>
	<title>Map</title>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
	
	<!-- Load Leaflet CSS and JavaScript files -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="" />
	<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>
	<style>
		#map {
			height: 500px;
			width: 100%;
			margin-top: 20px;
			margin-bottom: 20px;
		}
	</style>
</head>
<body>
	<div id="map"></div>
	
	<div id="form-div" style="display: none;">
		<form id="add-marker-form">
			<label for="name">Name:</label>
			<input type="text" id="name" name="name"><br><br>
			<label for="description">Description:</label>
			<input type="text" id="description" name="description"><br><br>
			<label for="latitude">Latitude:</label>
			<input type="text" id="latitude" name="latitude"><br><br>
			<label for="longitude">Longitude:</label>
			<input type="text" id="longitude" name="longitude"><br><br>
			<input type="submit" value="Add Marker">
		</form>
	</div>
	
	<div id="search-div">
		<label for="search-input">Search:</label>
		<input type="text" id="search-input" name="search-input" placeholder="Enter location name or coordinates">
		<button id="search-button">Search</button>
	</div>
	
	<script>
		// Initialize the map
var map = L.map('map').setView([51.505, -0.09], 13);

// Add the tile layer to the map
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
    '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
    'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
}).addTo(map);

// Create a layer control and add it to the map
var layerControl = L.control.layers().addTo(map);

// Create a layer group for the markers
var markers = L.layerGroup().addTo(map);

// Add the markers layer to the layer control
layerControl.addOverlay(markers, 'Markers');

// Hide the form when the map is clicked outside the form
map.on('click', function(e) {
  document.getElementById('form-div').style.display = 'none';
});

// Show the form when the user clicks on the map
map.on('click', function(e) {
  // Get the latitude and longitude of the click event
  var lat = e.latlng.lat.toFixed(6);
  var lng = e.latlng.lng.toFixed(6);

  // Show the form
  document.getElementById('form-div').style.display = 'block';

  // Set the latitude and longitude values in the form
  document.getElementById('lat-input').value = lat;
  document.getElementById('lng-input').value = lng;
});

// Handle form submission
document.getElementById('form').addEventListener('submit', function(e) {
  // Prevent the default form submission behavior
  e.preventDefault();

  // Get the form values
  var title = document.getElementById('title-input').value;
  var description = document.getElementById('description-input').value;
  var lat = document.getElementById('lat-input').value;
  var lng = document.getElementById('lng-input').value;

  // Create a new marker
  var marker = L.marker([lat, lng]).addTo(markers);

  // Add a popup to the marker
  marker.bindPopup('<b>' + title + '</b><br>' + description).openPopup();

  // Reset the form
  document.getElementById('form').reset();
	

  // Hide the form
  document.getElementById('form-div').style.display = 'none';
});
</script>
	</body>
	</html>
		
